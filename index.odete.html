<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Quem matou Odete Roitman?</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --bg1:#060818;
  --bg2:#0a0f2c;
  --card:#101828;
  --ink:#e5f0ff;
  --muted:#a8b3c7;
  --accent:#00e5ff;
  --accent2:#9333ea;
  --amber:#f59e0b;
  --green:#16a34a;
  --red:#ef4444;
}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  background:radial-gradient(circle at top,var(--bg2),#020412 80%);
  color:var(--ink);
  font-family:'Inter',system-ui;
  -webkit-font-smoothing:antialiased;
  min-height:100vh;
  overflow-x:hidden;
}

/* ======= BANNER SUPERIOR ======= */
.banner-top{
  width:100%;
  height:180px;
  background:linear-gradient(180deg,#0a0f2c,#020412);
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
  overflow:hidden;
  box-shadow:0 4px 30px rgba(0,0,0,0.5);
}
.banner-top img{
  max-width:100%;
  max-height:180px;
  object-fit:contain;
  z-index:2;
  filter:drop-shadow(0 0 15px var(--accent));
  animation:float 4s ease-in-out infinite;
}
@keyframes float{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}

/* ======= CABEÇALHO ======= */
h1{
  font-family:'Orbitron',sans-serif;
  text-align:center;
  color:var(--amber);
  font-size:28px;
  letter-spacing:1px;
  text-shadow:0 0 10px rgba(245,158,11,.7);
  margin:18px 0 8px;
}
.sub{
  color:var(--muted);
  text-align:center;
  margin-bottom:18px;
  font-size:15px;
}

.wrap{max-width:480px;margin:0 auto;padding:0 16px 40px;}

/* ====== CARD ====== */
.card{
  background:linear-gradient(180deg,var(--card),#0a0f1c);
  border-radius:16px;
  padding:20px;
  box-shadow:0 0 25px rgba(0,229,255,.15);
  border:1px solid rgba(255,255,255,.05);
  backdrop-filter:blur(8px);
  transition:.3s;
}
.card:hover{box-shadow:0 0 25px var(--accent);}

/* ====== PRÊMIO ====== */
.premio{
  background:#0b1325;
  border:1px solid #1e293b;
  border-radius:12px;
  text-align:center;
  padding:14px;
  margin-bottom:18px;
  box-shadow:0 0 12px rgba(0,229,255,.1);
}
.premio small{color:var(--muted)}
.valor{
  color:var(--amber);
  font-size:30px;
  font-weight:800;
  margin-top:6px;
  text-shadow:0 0 8px rgba(245,158,11,.5);
}

/* ====== FOTOS ====== */
.grid{
  display:flex;
  gap:12px;
  justify-content:space-between;
  margin-bottom:16px;
  flex-wrap:wrap;
}
.photo-item{text-align:center;width:calc(25% - 8px);}
.photo{
  width:80px;
  height:80px;
  border-radius:50%;
  overflow:hidden;
  border:3px solid transparent;
  cursor:pointer;
  transition:.25s;
  margin:0 auto 6px;
  box-shadow:0 0 10px rgba(0,229,255,.1);
}
.photo img{
  width:100%;
  height:100%;
  object-fit:cover;
  object-position:center top;
}
.photo.sel{
  border-color:var(--amber);
  transform:scale(1.1);
  box-shadow:0 0 15px var(--amber);
}
.photo-name{font-size:13px;color:var(--muted);}

/* ===== FORM ===== */
label{display:block;color:var(--muted);font-size:13px;margin:10px 0 6px;}
input{
  width:100%;
  background:#0b1220;
  color:var(--ink);
  border:none;
  border-radius:10px;
  padding:12px;
  font-size:15px;
}
button{
  width:100%;
  border:none;
  border-radius:10px;
  padding:14px;
  font-weight:800;
  font-size:15px;
  cursor:pointer;
  transition:.25s;
}
.btn{
  background:linear-gradient(90deg,var(--amber),#ffb74a);
  color:#111;
  box-shadow:0 0 10px rgba(245,158,11,.4);
}
.btn:hover{filter:brightness(1.1);}
.msg{margin-top:12px;text-align:center;font-size:14px;color:var(--muted)}
.msg.ok{color:var(--green)}
.msg.err{color:var(--red)}
.whats{display:none;background:linear-gradient(90deg,#25d366,#128c7e);color:#fff;margin-top:10px;}
.pix-box{
  display:none;
  background:#0b1325;
  border:1px solid #1e293b;
  border-radius:10px;
  padding:10px;
  margin-top:15px;
  text-align:center;
  box-shadow:0 0 10px rgba(0,229,255,.1);
}
.pix-label{color:var(--muted);font-size:14px;margin-bottom:6px}
.pix-key{
  background:#1e293b;
  color:var(--ink);
  padding:8px 10px;
  border-radius:6px;
  font-size:14px;
  word-break:break-all;
  cursor:pointer;
  user-select:all;
  box-shadow:inset 0 0 6px rgba(0,229,255,.2);
}
.copied{color:var(--green);font-size:13px;margin-top:6px}
.total-valor{margin-top:10px;font-size:16px;color:var(--amber);font-weight:700;text-shadow:0 0 5px rgba(245,158,11,.5);}

/* ===== Overlay ===== */
.overlay{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  z-index:9999;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:var(--ink);
  text-align:center;
}
.loader{
  border:4px solid #1e293b;
  border-top:4px solid var(--amber);
  border-radius:50%;
  width:60px;height:60px;
  animation:spin 1s linear infinite;
  margin-bottom:16px;
}
@keyframes spin{100%{transform:rotate(360deg)}}
.overlay p{font-size:1.1em;color:var(--muted)}

/* ===== Popup ===== */
.popup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.85);
  z-index:99999;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}
.popup-content{
  background:var(--card);
  padding:20px;
  border-radius:10px;
  text-align:center;
  width:90%;
  max-width:320px;
  box-shadow:0 0 15px rgba(0,229,255,.3);
}
.popup-content h3{color:var(--amber);margin:0 0 12px}
.popup-content input{
  width:100%;
  padding:10px;
  border:none;
  border-radius:8px;
  background:#0b1220;
  color:var(--ink);
  font-size:15px;
  margin-bottom:12px;
}
.popup-content button{
  border:none;
  padding:10px 14px;
  border-radius:8px;
  font-weight:700;
  cursor:pointer;
  margin:4px;
}
.popup-content .ok{background:var(--amber);color:#111}
.popup-content .cancel{background:#1e293b;color:var(--muted)}

/* ===== RESPONSIVO ===== */
@media(max-width:480px){
  .banner-top{height:150px;}
  .photo{width:70px;height:70px;}
  h1{font-size:24px;}
}
</style>
</head>
<body>

<!-- Banner 3D topo -->
<div class="banner-top">
  <!-- Substitua o src abaixo pela sua imagem PNG sem fundo -->
  <img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Design%20sem%20nome.jpg?raw=true" alt="Banner 3D">
</div>

<div class="overlay" id="overlay">
  <div class="loader"></div>
  <p>Enviando aposta...</p>
</div>

<!-- Popup -->
<div class="popup" id="popup">
  <div class="popup-content">
    <h3>Digite o nome do suspeito ou sua opinião</h3>
    <input id="nomeSuspeito" type="text" placeholder="Ex: Lineu">
    <div>
      <button class="ok" id="confirmSuspeito">Confirmar</button>
      <button class="cancel" id="cancelSuspeito">Cancelar</button>
    </div>
  </div>
</div>

<div class="wrap">
  <h1>Quem matou Odete Roitman?</h1>
  <p class="sub">Participe e concorra ao prêmio acumulado.<br>Após confirmar, será exibida a chave PIX!</p>

  <div class="card" id="cardForm">
    <div class="premio">
      <small>Prêmio até o momento (dividido entre os ganhadores)</small>
      <div id="premio" class="valor">R$ 0,00</div>
    </div>

    <div class="grid" id="grid">
      <div class="photo-item" data-nome="Celina"><div class="photo"><img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Celine.jpg?raw=true"></div><div class="photo-name">Celina</div></div>
      <div class="photo-item" data-nome="Sezar"><div class="photo"><img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Cezar.jpg?raw=true"></div><div class="photo-name">Sezar</div></div>
      <div class="photo-item" data-nome="Heleninha"><div class="photo"><img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Heleninha.jpg?raw=true"></div><div class="photo-name">Heleninha</div></div>
      <div class="photo-item" data-nome="Marcos Aurélio"><div class="photo"><img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Marcus%20Aur%C3%A9lio.jpg?raw=true"></div><div class="photo-name">Marcos Aurélio</div></div>
      <div class="photo-item" data-nome="Maria de Fátima"><div class="photo"><img src="https://github.com/ClenaStore/barreirense/blob/main/paste/Maria%20de%20F%C3%A1tima.jpg?raw=true"></div><div class="photo-name">Maria de Fátima</div></div>
      <div class="photo-item outro" data-nome=""><div class="photo"><img src="https://upload.wikimedia.org/wikipedia/commons/8/89/Portrait_Placeholder.png"></div><div class="photo-name">Outro Suspeito</div></div>
    </div>

    <form id="f">
      <input type="hidden" id="foto">
      <label>Nome completo</label>
      <input id="nome" type="text" required placeholder="Seu nome completo">
      <label>E-mail</label>
      <input id="email" type="email" required placeholder="seu@email.com">
      <label>Telefone / WhatsApp</label>
      <input id="tel" type="tel" required maxlength="16" placeholder="(00) 00000-0000">
      <label>Quantidade de cotas</label>
      <input id="qtd" type="number" min="1" required placeholder="Quanto mais cotas maior ganho">
      <button id="enviar" class="btn" type="submit">Confirmar Participação</button>
    </form>
    <div id="msg" class="msg"></div>
  </div>

  <!-- RESUMO -->
  <div id="resumo" style="display:none;text-align:center;">
    <h2 style="color:var(--amber);margin-top:0;">🎉 Jogo registrado 🎉</h2>
    <p id="rNome"></p>
    <p id="rSuspeito"></p>
    <p id="rCotas"></p>
    <p id="rValor"></p>

    <div id="pixBox" class="pix-box">
      <div class="pix-label">COPIE A CHAVE PARA PAGAMENTO:</div>
      <div id="pixKey" class="pix-key">711e433b-bb4e-477e-adb7-518eacf2f67e</div>
      <div id="copiedMsg" class="copied" style="display:none;">✅ Chave copiada!</div>
    </div>

    <div id="totalValor" class="total-valor"></div>
    <button id="whats" class="whats">📩 Enviar Comprovante pelo WhatsApp</button>
    <p style="color:var(--muted);font-size:13px;margin-top:10px">Recarregue a página para nova aposta.</p>
  </div>
</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbw6ffyPNYEZqbRLo-ov7maEciyqw-4QZggFw5dVqJal-qsC6gs-Go2k4v8kHh4aHgs5/exec";
const NUMERO_WHATSAPP="5577998253249";
const PIX_KEY="711e433b-bb4e-477e-adb7-518eacf2f67e";
const PRECO=5;

const fotos=document.querySelectorAll(".photo-item");
const fotoH=document.getElementById("foto");
const overlay=document.getElementById("overlay");
const cardForm=document.getElementById("cardForm");
const resumo=document.getElementById("resumo");
const pixBox=document.getElementById("pixBox");
const pixKey=document.getElementById("pixKey");
const copiedMsg=document.getElementById("copiedMsg");
const whats=document.getElementById("whats");
const popup=document.getElementById("popup");
const nomeSuspeito=document.getElementById("nomeSuspeito");
const confirmSuspeito=document.getElementById("confirmSuspeito");
const cancelSuspeito=document.getElementById("cancelSuspeito");
let fotoSelecionada=null;

// Selecionar suspeito
fotos.forEach(item=>{
  const p=item.querySelector(".photo");
  p.addEventListener("click",()=>{
    fotos.forEach(x=>x.querySelector(".photo").classList.remove("sel"));
    p.classList.add("sel");
    if(item.classList.contains("outro")){
      popup.style.display="flex";
      nomeSuspeito.value="";
      nomeSuspeito.focus();
      fotoSelecionada=item;
    }else{
      fotoH.value=item.dataset.nome;
    }
  });
});
confirmSuspeito.onclick=()=>{
  const nome=nomeSuspeito.value.trim();
  if(nome){
    fotoSelecionada.dataset.nome=nome;
    fotoSelecionada.querySelector(".photo-name").textContent=nome;
    fotoH.value=nome;
    popup.style.display="none";
  }
};
cancelSuspeito.onclick=()=>{popup.style.display="none";};

// Máscara telefone
tel.addEventListener("input",e=>{
  let v=e.target.value.replace(/\D/g,'').slice(0,11);
  v=v.length>10? v.replace(/^(\d{2})(\d{5})(\d{4}).*/,'($1) $2-$3')
               :v.replace(/^(\d{2})(\d{4})(\d{0,4}).*/,'($1) $2-$3');
  e.target.value=v;
});

// Copiar PIX
pixKey.addEventListener("click",async()=>{
  await navigator.clipboard.writeText(PIX_KEY);
  copiedMsg.style.display="block";
  setTimeout(()=>copiedMsg.style.display="none",2000);
});

// Atualizar prêmio
async function refreshPremio(){
  try{
    const r=await fetch(`${SCRIPT_URL}?action=premio`);
    const j=await r.json();
    document.getElementById("premio").textContent=j.valor||"R$ 0,00";
  }catch{}
}
refreshPremio();
setInterval(refreshPremio,8000);

// Enviar aposta
document.getElementById("f").addEventListener("submit",async e=>{
  e.preventDefault();
  const nome=document.getElementById("nome").value.trim();
  const email=document.getElementById("email").value.trim();
  const tel=document.getElementById("tel").value.trim();
  const qtd=Number(document.getElementById("qtd").value);
  const foto=fotoH.value;
  if(!foto){alert("Selecione um suspeito.");return;}
  overlay.style.display="flex";
  const payload={action:"registrar",nome,email,telefone:tel,qtd,foto,status:"PENDENTE"};
  try{
    const res=await fetch(SCRIPT_URL,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(payload)});
    const t=await res.text();
    overlay.style.display="none";
    if(t.includes("OK")){
      cardForm.style.display="none";
      resumo.style.display="block";
      pixBox.style.display="block";
      const total=qtd*PRECO;
      document.getElementById("rNome").textContent=`👤 ${nome}`;
      document.getElementById("rSuspeito").textContent=`🎯 Suspeito: ${foto}`;
      document.getElementById("rCotas").textContent=`📦 ${qtd} cota(s)`;
      document.getElementById("rValor").textContent=`💰 Total: R$ ${total.toFixed(2).replace('.',',')}`;
      document.getElementById("totalValor").textContent=`Valor a pagar: R$ ${total.toFixed(2).replace('.',',')}`;
      whats.style.display="block";
      whats.onclick=()=>{
        const msg=`Olá! Enviando comprovante.\n\n👤 ${nome}\n📧 ${email}\n📞 ${tel}\n🎯 ${foto}\n💰 ${qtd} cota(s) = R$ ${total.toFixed(2).replace('.',',')}`;
        window.open(`https://wa.me/${NUMERO_WHATSAPP}?text=${encodeURIComponent(msg)}`,"_blank");
      };
    }else if(t.includes("duplicado")){
      alert("⚠️ Este telefone já possui uma aposta.");
    }else{
      alert("❌ Erro ao enviar.");
    }
  }catch{
    overlay.style.display="none";
    alert("Falha de conexão.");
  }
});
</script>
</body>
</html>
